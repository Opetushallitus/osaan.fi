<polku></polku>

<div class="panel panel-primary">
  <div class="panel-heading">
    <h3 class="panel-title">
      {{ 'raportti.otsikko' | translate }} - {{ raportti | lokalisoiKentta:'koulutusala_nimi' }} - {{ raportti | lokalisoiKentta:'opintoala_nimi' }} - {{ raportti | lokalisoiKentta:'tutkinto_nimi' }}
    </h3>
  </div>
  <div class="panel-body">
    <div class="row">
      <div class="pull-right">
        <div class="btn-group" role="group">
          <button class="btn btn-success" ng-model="valittuRaportti" btn-radio="'raportti'">{{ 'raportti.tyyppi_raportti' | translate }}</button>
          <button class="btn btn-success" ng-model="valittuRaportti" btn-radio="'tekstiraportti'">{{ 'raportti.tyyppi_tekstiraportti' | translate }}</button>
        </div>
        <div class="btn-group">
          <form action="api/kaiku" method="post">
            <input type="hidden" name="data" value="{{tekstiRaportti}}">
            <input type="hidden" name="filename" value="raportti.txt">
            <button class="btn btn-default" type="submit" ng-click="estaPoistumisvaroitus()"><span class="glyphicon glyphicon-download-alt"></span> <span translate="raportti.lataa_tekstiraportti"></span></button>
          </form>
        </div>
      </div>

    </div>
    <div ng-if="valittuRaportti == 'tekstiraportti'">
      <h2 translate="raportti.tyyppi_tekstiraportti"></h2>

      <div class="col-md-12">
        <div class="form-group">
          <textarea class="form-control" ng-model="tekstiRaportti" style="height: 30em; font-family: monospace" readonly></textarea>
        </div>
      </div>
    </div>
    <div ng-if="valittuRaportti == 'raportti'">

    <div>{{ 'raportti.paivays' | translate }}: {{ paivays | date: 'dd.MM.yyyy' }}</div>

    <kaavio jakauma="jakauma"></kaavio>

    <div>
      <label>
        <input type="checkbox" ng-model="naytaKommentit">
        <span translate="raportti.nayta_kommentit"></span>
      </label>
    </div>

    <section class="tutkinnonosa" ng-repeat="tutkinnonosa in raportti.tutkinnonosat">
      <h2>{{ tutkinnonosa | lokalisoiKentta:'nimi' }}</h2>

      <section class="kohdealue" ng-repeat="kohdealue in tutkinnonosa.kohdealueet">
        <h3>{{ kohdealue | lokalisoiKentta:'nimi' }}</h3>

        <table class="raportti table table-striped table-condensed">
          <thead>
            <tr>
              <th translate="raportti.ammattitaidon_kuvaus"></th>
              <th translate="raportti.arvio"></th>
              <th translate="raportti.kommentti"></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="kuvaus in kohdealue.kuvaukset">
              <td>{{ kuvaus | lokalisoiKentta:'nimi' }}</td>
              <td>{{ kuvaus.arvio.arvio }}</td>
              <td>
                <button class="btn btn-default" popover="{{ kuvaus.arvio.vapaateksti }}" popover-placement="left" popover-trigger="mouseenter" ng-if="!naytaKommentit && kuvaus.arvio.vapaateksti">
                  <span class="glyphicon glyphicon-comment"></span>
                </button>
                <span ng-if="naytaKommentit" ng-bind="kuvaus.arvio.vapaateksti"></span>
              </td>
            </tr>
          </tbody>
        </table>
      </section>
    </section>
    </div>
  </div>
  <div class="panel-footer">
    <div class="row">
      <div class="col-md-12">
        <button class="btn btn-primary pull-left" role="button" ng-click="palaaArviointiin()">
          <span class="glyphicon glyphicon-arrow-left" aria-hidden="true"></span>&nbsp;
          {{ 'raportti.palaa_arviointiin' | translate }}
        </button>
        <tallennus></tallennus>
      </div>
    </div>
  </div>
</div>
